## Commands run to generate entities

<br>

```bash
php bin/console make:entity Application
php bin/console make:entity User
php bin/console make:entity Permission
php bin/console make:entity UserGroup
php bin/console make:entity ApplicationUser
```

> Note: `UserGroup` was used instead of `Group` because `group` is a reserved word in SQL and may cause command execution failures.

<br>

 To  rename the final database table generated by `UserGroup` as `Group`, the annotations was added to the entity class:
 
 ```bash
@ORM\Table(name="`group`")
```

> Notice: The backticks are in place to avoid errors when trying to query the `group` table since Symfony does not automatically add them in it's queries.

<br>

The need to rename it to group was to keep inline with our declared entity relationship diagram.

<br>

The `make:entity` commands were followed by successive repetitions used in generating relationships amongst the entities.

## Testing & Demo Data

In order to facilitate a non-geeky real-comprehensive functional testing for the entities, console commands were generated for the entities under `App\Command` namespace. These commands includes:  

<br>                     


| Command           | Description  |
|---                |---|
| `ums:app:create`    | Creates a new application |
| `ums:group:create`  | Creates a new group and its associated permission. |
| `ums:user:create`   | Creates a new user |
| `ums:group:add`     | Adds a user to a group in an application. |

> Note: This commands are interactive.

<br>

## Using the `ums:app:create` command

```bash
php bin/console ums:app:create

...

What's the application name? [required]:
> ...

```

###### Expected Response Format:

<em>Added a new application with  name: `application name`, appToken: `xxx... application token` accessToken: `xxx.. access token.`</em>

<br>

## Using the `ums:group:create` command

```bash
php bin/console ums:group:create

...

What's the id of the application that owns the group? [required]:
> ...

Name of the group [required]:
> ...

What role should be assigned to the group (One of: admin, user) [required]:
> ...

What's the permission assigned to the group (One of: list, view, create, edit, delete) [required]:
> ...

```

###### Expected Response Format:

<em>Added a new group to application `application name` with  name: `group name`, role: `group role` permission: `group permission` with permission id: `permission id`</em>



<br>

## Using the `ums:user:create` command

```bash
php bin/console ums:user:create

...

What's the id of the application that owns the user? [required]:
> ...

User's first name [optional]:
> ...

User's last name [optional]:
> ...

User's other names [optional]:
> ...

User's username [required]:
> ...

User's email address [required]:
> ...

User's role (One of user, admin, superuser) {Default: user} [required]:
> ...

User's password [required]:
> ...
```

###### Expected Response Format:

<em>Added a new user with  username: `username` to application `application name`</em>

<br>

## Using the `ums:group:add` command

```bash
php bin/console ums:group:add

...

What's the id of the application that owns the group [required]:
> ...

ID of the user. [required]:
> ...

ID the the group to add user to. [required]:
> ...

```

###### Expected Response Format:

<em>The `App name` user with username `username` was successfully added to the group `group name`.</em>

<br>

### A case on `ApplicationUser` entity.

<br>

In the course of research, an alternative solution to the `ApplicationUser` entity problem (Symfony doesn't timestamp relations) was [found here.](https://stackoverflow.com/questions/20013135/adding-created-timestamp-to-join-table-in-doctrine2) 

It is however decided based on the structure of the table generated and the extra overhead it presented by this technique negates it's advantages.

Hence, it was concluded to manually create an `ApplicationUser` entity. This however means we need to manually perform CRUD operations on the table ourselves. An approach that has been proven in the course of development to be faster than it's alternative.

<br>

